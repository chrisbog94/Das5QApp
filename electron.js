var _0xacba = ['exec\x20error:\x20', 'stderr:\x20', 'loadURL', 'setContextMenu', 'click', 'path\x20icon\x20', 'win32', 'notify', 'OPEN_APP_WINDOW_CHANNEL', 'on\x20OPEN_APP_WINDOW_CHANNEL', 'restore', 'minimize', 'CLOSE_APP_WINDOW_CHANNEL', 'close-app-window-channel', 'on\x20CLOSE_APP_WINDOW_CHANNEL', 'OPEN_DEVELOPER_TOOL', 'openDevTools', 'right', 'QUIT_APP_FROM_CLIENT_SIDE', 'quit-app-from-client-side', 'App\x20closed\x20from\x20the\x20client\x20side', 'NOTIFY_CHANNEL', '\x20silentState:\x20', 'newDevicePlugged', 'serviceChannelEvent', 'servicePipeEnd', 'qButtonReleased', 'setQButtonPressed', 'isWindowFocused', 'closeWindow', 'qButtonPressedAndReleased', 'qButtonPressed', 'firmwareUpdateStatus', 'devicePluggedOut', 'windowNameChanged\x20to\x20', 'windowNameChange', './flash-notice-to-client.js', 'FLASH_NOTICE_CHANNEL', 'extensionHostEvents', 'open-auth-login-page', 'http://localhost/oauth/redirect', '/thirdparty/proxy/oauth2/requestTokens', 'https://', '/thirdparty/proxy/oauth2', '/thirdparty/proxy/oauth2/proxy', 'extension-host.js', 'forking\x20extension\x20host\x20at:\x20', 'assign', 'openOauthLoginPage', 'fromPartition', 'oauthwindow', 'clearStorageData', '/thirdparty/proxy/oauth2/authorize/', '?redirectUri=', 'webRequest', 'onBeforeRequest', 'url', 'authWindow,\x20session\x20before\x20request', 'state', 'got\x20code\x20\x20', 'get', '/?code=', '&state=', 'authWindow,\x20did-navigate\x20,\x20fetched\x20tokens', 'got\x20api\x20key\x20', 'returnValue', 'Error\x20when\x20requesting\x20api\x20key\x20', 'openOauthLoginPage,\x20opening\x20url\x20', 'location', 'replace', '\x5c$&', '[?&]', '(=([^&#]*)|&|#|$)', 'onRegisterKeyPressedAfterQButton', 'customButtonsOnHover', 'Q-Shortcuts\x20window\x20closed', 'blur', 'Q-Shortcuts\x20window\x20lost\x20focus', 'F24', 'filter', 'code', 'push', 'loadFile', './q-shortcut.html', 'QShortcutEvents', 'keyPressedAfterQButton', 'actionCenterUtilitiesEvents', 'openDashboard', 'openExternal', 'openAppAtUrl', 'Main\x20process\x20received\x20open\x20event\x20from\x20action\x20center\x20to\x20open\x20app\x20at\x20url\x20', 'resolvePath', 'changeAdvancedServiceLogState', 'grantWin32ServicePermissionsChannel', 'openFileSystemExplorerChannel', 'grantWin32ServicePermissionToFile\x20should\x20only\x20be\x20called\x20on\x20Windows', 'icacls\x20\x22', '\x22\x20/grant\x20*S-1-5-19:F', 'joinPaths', 'grantWin32ServicePermissions', 'Error\x20while\x20granting\x20service\x20\x20permission\x20to\x20', 'Error\x20', 'openFileSystemExplorer', 'electron.js,\x20openFileSystemExplorer', 'showOpenDialog', 'showOpenDialog\x20got\x20file\x20paths:', 'electron', 'node-notifier', 'auto-launch', 'child_process', 'exec', 'fork', './file-manager.js', 'homedir', '/.quio/v2/', 'assets/images/q-icon.png', 'production', 'http://localhost:4200/', 'file://', '/index.html', 'Q-desktop', 'env', 'Q_NODE_ENV', 'development', 'qstaging.daskeyboard.com', 'argv', 'length', 'path', 'resolve', 'join', 'Update.exe', 'execPath', 'spawn', '--squirrel-install', '--squirrel-updated', '/installation_finished.txt', '--createShortcut', 'quit', '--squirrel-uninstall', '--squirrel-obsolete', 'uncaughtException', 'error', './service-talker.js', 'requestSingleInstanceLock', 'info', 'got\x20the\x20lock\x20', 'On\x20second\x20instance\x20of\x20QApp', 'focus', './local-api', 'ready', 'app\x20on\x20ready', 'Application\x20is\x20starting...', 'CURRENT\x20platform:\x20', 'platform', 'getVersion', 'Using\x20cloud\x20url\x20', 'PLATFORM', 'darwin', 'linux', 'then', 'addWindowListeners', 'app\x20will\x20quit', 'commandLine', 'appendSwitch', 'ignore-certificate-errors', 'window-all-closed', 'app\x20on\x20all\x20window\x20closed', 'activate', 'show', 'before-quit', 'destroySignalCenterWindow', 'An\x20instance\x20of\x20QApp\x20is\x20already\x20running.\x20This\x20instance\x20will\x20be\x20closed', 'executing\x20actions\x20before\x20quit', 'closeUnsolicitedPipe', 'close', 'appWindow\x20on\x20close', 'preventDefault', 'hide', 'closed', 'Main\x20app\x20windows\x20closed', 'exit', 'did-finish-load', 'Web\x20content\x20did\x20finish\x20load', 'setViewIsReady', 'webContents', 'type', 'keyUp', 'key', 'keyDown', 'session', 'will-download', 'starting\x20download\x20item', 'setSavePath', 'updated', 'interrupted', 'Download\x20is\x20interrupted\x20but\x20can\x20be\x20resumed', 'progressing', 'isPaused', 'Download\x20is\x20paused', 'Received\x20bytes:\x20', 'getReceivedBytes', 'once', 'done', 'completed', 'Download\x20successfully', 'send', 'mainProcessUtilitiesEvents', 'downloadFinished', 'Error\x20when\x20trying\x20to\x20run\x20firmware\x20executable\x20', 'removeFile', 'Download\x20failed:\x20', 'append', 'paste', 'Cmd+V', 'Ctrl+V', 'copy', 'Ctrl+C', 'cut', 'Cmd+X', 'selectall', 'Cmd+A', 'Ctrl+A', 'context-menu', 'Das\x20Keyboad\x20Q', 'isEnabled', 're-enabling\x20auto\x20launch', 'enable', 'catch', 'ps\x20-ef\x20|\x20grep\x20-i\x20\x22das-keyboard-q\x22\x20|\x20awk\x20\x27{system(\x22kill\x20-9\x20\x22\x20$2)}\x27', 'ps\x20-ef\x20|\x20grep\x20-i\x20\x22Das\x20Keyboard\x20Q\x22\x20|\x20awk\x20\x27{system(\x22kill\x20-9\x20\x22\x20$2)}\x27', 'ps\x20-ef\x20|\x20grep\x20-i\x20q-Desktop\x20|\x20awk\x20\x27{system(\x22kill\x20-9\x20\x22\x20$2)}\x27'];
(function (_0x140e8d, _0x1a09bf) {
    var _0x442d1b = function (_0x4ec5dc) {
        while (--_0x4ec5dc) {
            _0x140e8d['push'](_0x140e8d['shift']());
        }
    };
    _0x442d1b(++_0x1a09bf);
}(_0xacba, 0x151));
var _0xaacb = function (_0x230d44, _0xa0712d) {
    _0x230d44 = _0x230d44 - 0x0;
    var _0x1914fc = _0xacba[_0x230d44];
    return _0x1914fc;
};
const {app: app, BrowserWindow: BrowserWindow, Tray: Tray, Menu: Menu, MenuItem: MenuItem, ipcMain: ipcMain, session: session, dialog: dialog, shell: shell} = require('electron'),
    ElectronNotification = require('electron')['Notification'];
let tray = null;
const request = require('request-promise'), appLogger = require('./logger.js'), path = require('path'),
    notifier = require('node-notifier'), autoLaunch = require('auto-launch'),
    exec = require('child_process')['exec'], fork = require('child_process')['fork'],
    execFile = require('child_process')['execFile'], fileManager = require('./file-manager.js'),
    home = require('os')['homedir'](), pathToquioV2Folder = home + '/.quio/v2/',
    pathToTrayIcon = 'assets/images/16x16.png', pathToApplicationIcon = 'assets/images/q-icon.png', production = 'production',
    development = 'development', loadUrlWhenDevelopmentEnv = 'http://localhost:4200/',
    loadUrlWhenProdutionEnv = 'file://' + __dirname + '/index.html', applicationTitle = 'Q-desktop',
    currentEnvironment = process['env']['Q_NODE_ENV'] || 'production';
let path_icon = '';
path_icon = 'darwin' === process['platform'] ? 'assets/images/q-icon.png' : ('development' === currentEnvironment ? '' : '/../app.asar.unpacked/') + 'assets/images/q-icon.png';
const cloudServerUrl = currentEnvironment === production ? 'q.daskeyboard.com' : 'qstaging.daskeyboard.com';
let actionCenterWindowModule, appWindow = null, isWebContentReady = !0x1, oauthWindow = null,
    registerKeyPressedWindow = null, inputAfterQButton = [], ctrlKeyPressed = !0x1, extensionHostHaveBeenLaunch = !0x1;

function handleSquirrelEvent() {
    if (0x1 === process['argv']['length']) return !0x1;
    const _0x1c976b = require('child_process'), _0x20eeb4 = require('path'),
        _0x5aa84c = _0x20eeb4['resolve'](process['execPath'], '..'),
        _0x1f72bb = _0x20eeb4['resolve'](_0x5aa84c, '..'),
        _0x1434ad = _0x20eeb4['resolve'](_0x20eeb4['join'](_0x1f72bb, 'Update.exe')),
        _0x1d9a85 = _0x20eeb4['basename'](process['execPath']), _0x24b5b2 = require('./file-manager.js'),
        _0x36df90 = function (_0x136b94) {
            return function (_0x5d52da, _0xd6fc31) {
                let _0x3d3fad;
                try {
                    _0x3d3fad = _0x1c976b['spawn'](_0x5d52da, _0xd6fc31, {'detached': !0x0});
                } catch (_0x169c9b) {
                }
                return _0x3d3fad;
            }(_0x1434ad, _0x136b94);
        };
    switch (process['argv'][0x1]) {
        case '--squirrel-install':
        case '--squirrel-updated':
            const _0x42ad9d = _0x20eeb4['join'](_0x1f72bb, '/installation_finished.txt');
            return _0x24b5b2['write'](_0x42ad9d, ''), _0x36df90(['--createShortcut', _0x1d9a85]), setTimeout(() => {
                app['quit']();
            }, 0x3e8), !0x0;
        case '--squirrel-uninstall':
            return _0x36df90(['--removeShortcut', _0x1d9a85]), setTimeout(() => {
                app['quit']();
            }, 0x3e8), !0x0;
        case '--squirrel-obsolete':
            return app['quit'](), !0x0;
    }
}

if (process['on']('uncaughtException', _0x1bcea6 => {
    appLogger['error']('uncaughtException' + _0x1bcea6);
}), handleSquirrelEvent()) ; else {
    const e = require('./service-talker.js'), n = require('./profile-switcher'), o = app['requestSingleInstanceLock'](),
        t = require('./signal-center.js');
    if (appLogger['info']('got the lock ' + o), o) {
        app['on']('second-instance', (_0x1e8d3f, _0x582f54, _0x32bb66) => {
            appLogger['info']('On second instance of QApp'), appWindow && (appWindow['isMinimized']() && appWindow['restore'](), appWindow['show'](), appWindow[_0xaacb('0x29')]());
        }), actionCenterWindowModule = require('./action-center');
        const e = require(_0xaacb('0x2a'));
        app['on'](_0xaacb('0x2b'), () => {
            appLogger['info'](_0xaacb('0x2c')), appLogger['info'](_0xaacb('0x2d')), appLogger['info']('CURRENT\x20ENVIRONMENT:\x20' + currentEnvironment), appLogger['info'](_0xaacb('0x2e') + process['platform']), appLogger['info']('CURRENT\x20app\x20version\x20' + app[_0xaacb('0x30')]()), appLogger['info'](_0xaacb('0x31') + cloudServerUrl), global['PLATFORM'] = process['platform'], 'darwin' !== process['platform'] && 'linux' !== process['platform'] || configAutoLaunch(), createWindowElectron()['then'](_0x3f9c89 => {
                _0x3f9c89 && e['setDasKeyboardQMainWindow'](appWindow);
            }), t['addWindowListeners']();
        }), app['on']('will-quit', () => {
            appLogger['info']('app will quit');
        }), app['commandLine']['appendSwitch']('ignore-certificate-errors'), app['on']('window-all-closed', () => {
            appLogger['info']('app on all window closed'), 'darwin' !== process['platform'] && (executeActionsBeforeQuit(), app['quit']());
        }), app['on'](_0xaacb('0x3d'), () => {
            appLogger['info']('app\x20on\x20activate'), appWindow['isVisible']() || appWindow['show']();
        }), app['on'](_0xaacb('0x3f'), () => {
            appLogger['info']('app\x20on\x20before-quit'), appWindow = null, oauthWindow = null, t[_0xaacb('0x40')](), isWebContentReady = !0x1;
        });
    } else appLogger['info'](_0xaacb('0x41')), app['quit']();

    function executeActionsBeforeQuit() {
        appLogger['info'](_0xaacb('0x42')), n['stopOsScript'](), e[_0xaacb('0x43')]();
    }

    async function createWindowElectron() {
        return determinecurrentEnvironmentAndLoadUrl(appWindow = new BrowserWindow({
            'title': applicationTitle,
            'icon': path['join'](__dirname, pathToApplicationIcon),
            'width': 0x4e2,
            'height': 0x320,
            'minWidth': 0x4e2,
            'minHeight': 0x320,
            'show': !0x1,
            'webPreferences': {'webSecurity': !0x1, 'devTools': 0x1}
        })), appWindow['on'](_0xaacb('0x44'), function (_0x4e2dc6) {
            appLogger['info'](_0xaacb('0x45')), appWindow && (_0x4e2dc6[_0xaacb('0x46')](), appWindow[_0xaacb('0x47')]());
        }), appWindow['on'](_0xaacb('0x48'), function () {
            appLogger['info'](_0xaacb('0x49')), appWindow = null, t[_0xaacb('0x40')](), oauthWindow = null, 'darwin' === process['platform'] || 'linux' === process['platform'] ? uglyQuit() : app[_0xaacb('0x4a')]();
        }), appWindow['webContents']['on'](_0xaacb('0x4b'), () => {
            appLogger['info'](_0xaacb('0x4c')), isWebContentReady = !0x0, extensionHostHaveBeenLaunch || (extensionHostHaveBeenLaunch = !0x0, startExtensionHost()), e[_0xaacb('0x4d')](!0x0);
        }), appWindow['webContents']['on']('new-window', (_0x5a7d39, _0x33f75b) => {
            _0x5a7d39[_0xaacb('0x46')](), shell['openExternal'](_0x33f75b);
        }), appWindow['webContents']['on']('before-input-event', (_0x67bc46, _0x2b1e29) => {
            switch (_0x2b1e29['type']) {
                case 'keyUp':
                    'Control' === _0x2b1e29['key'] && (ctrlKeyPressed = !0x1);
                    break;
                case 'keyDown':
                    'Control' === _0x2b1e29['key'] && (ctrlKeyPressed = !0x0);
            }
        }), appWindow['webContents']['session']['on']('will-download', (_0xcd152b, _0x2770a0, _0xbb8f1f) => {
            appLogger['info']('starting download item');
            const _0x2c6411 = path['resolve'](pathToquioV2Folder + 'firmware.exe');
            _0x2770a0[_0xaacb('0x56')](_0x2c6411), _0x2770a0['on'](_0xaacb('0x57'), (_0x5d1ff4, _0x3cbbab) => {
                _0xaacb('0x58') === _0x3cbbab ? appLogger['info'](_0xaacb('0x59')) : _0xaacb('0x5a') === _0x3cbbab && (_0x2770a0[_0xaacb('0x5b')]() ? appLogger['info'](_0xaacb('0x5c')) : appLogger['info'](_0xaacb('0x5d') + _0x2770a0[_0xaacb('0x5e')]()));
            }), _0x2770a0[_0xaacb('0x5f')](_0xaacb('0x60'), (_0x433179, _0x2f38aa) => {
                let _0x12f8a3;
                _0xaacb('0x61') === _0x2f38aa ? (appLogger['info'](_0xaacb('0x62')), _0xbb8f1f[_0xaacb('0x63')](global[_0xaacb('0x64')][_0xaacb('0x65')], !0x0), execFile(_0x2c6411, [], (_0x58fc52, _0xe9c484, _0x473809) => {
                    _0x58fc52 && appLogger['error'](_0xaacb('0x66') + _0x58fc52), _0x12f8a3 = setTimeout(() => {
                        fileManager[_0xaacb('0x67')](_0x2c6411), clearTimeout(_0x12f8a3);
                    }, 0xbb8);
                })) : (appLogger['info'](_0xaacb('0x68') + _0x2f38aa), _0xbb8f1f[_0xaacb('0x63')](global['mainProcessUtilitiesEvents'][_0xaacb('0x65')], !0x1), _0x12f8a3 = setTimeout(() => {
                    fileManager['removeFile'](_0x2c6411), clearTimeout(_0x12f8a3);
                }, 0xbb8));
            });
        }), setTrayIconAndConfigureTheActions(appWindow), createWindowContextMenu(appWindow), appWindow;
    }

    function createWindowContextMenu(_0x47d503) {
        const ContextMenu = new Menu();
        ContextMenu['append'](new MenuItem({
            'role': 'paste',
            'accelerator': 'darwin' === process['platform'] ? 'Cmd+V' : 'Ctrl+V'
        })), ContextMenu['append'](new MenuItem({
            'role': 'copy',
            'accelerator': 'darwin' === process['platform'] ? 'Cmd+C' : 'Ctrl+C'
        })), ContextMenu['append'](new MenuItem({
            'role': 'toggledevtools',
            'accelerator': 'darwin' === process['platform'] ? 'Cmd+k' : 'Ctrl+k'
        })), ContextMenu['append'](new MenuItem({
            'role': 'cut',
            'accelerator': 'darwin' === process['platform'] ? 'Cmd+X' : 'Ctrl+X'
        })), ContextMenu['append'](new MenuItem({
            'role': 'selectall',
            'accelerator': 'darwin' === process['platform'] ? 'Cmd+A' : 'Ctrl+A'
        })), _0x47d503['webContents']['on']('context-menu', (_0x39b06b, _0x11957f) => {
            const _0xd1196d = {'x': _0x11957f['x'], 'y': _0x11957f['y']};
            'darwin' === process['platform'] && ctrlKeyPressed || ContextMenu['popup'](_0x47d503, _0xd1196d);
        });
    }

    function configAutoLaunch() {
        appLogger['info']('configuring\x20auto\x20launch');
        const _0x3b4057 = new autoLaunch({'name': 'Das Keyboad Q'});
        _0x3b4057['isEnabled']()['then'](function (_0x110447) {
            _0x110447 ? appLogger['info']('auto\x20launch\x20is\x20already\x20enabled') : (appLogger['info']('re-enabling auto launch'), _0x3b4057['enable']());
        })[_0xaacb('0x79')](function (_0x36599f) {
            appLogger['err'](_0x36599f);
        });
    }

    function uglyQuit() {
        let _0x37c0a1;
        if ('production' === currentEnvironment) switch (process['platform']) {
            case 'linux':
                _0x37c0a1 = _0xaacb('0x7a');
                break;
            case'darwin':
                _0x37c0a1 = _0xaacb('0x7b');
        } else _0x37c0a1 = _0xaacb('0x7c');
        exec(_0x37c0a1, (_0x4fe6e0, _0x1c1f2f, _0x4a5e9a) => {
            _0x4fe6e0 ? appLogger['error'](_0xaacb('0x7d') + _0x4fe6e0) : (appLogger['info']('stdout:\x20' + _0x1c1f2f), appLogger['info'](_0xaacb('0x7e') + _0x4a5e9a));
        });
    }

    function determinecurrentEnvironmentAndLoadUrl(_0x44ebcb) {
        currentEnvironment === production ? _0x44ebcb[_0xaacb('0x7f')](loadUrlWhenProdutionEnv) :
            currentEnvironment === development ? (appLogger['info'](loadUrlWhenDevelopmentEnv), _0x44ebcb[_0xaacb('0x7f')](loadUrlWhenDevelopmentEnv)) :
                (_0x44ebcb['loadURL'](loadUrlWhenProdutionEnv), appLogger['error']('No\x20current\x20environmnent\x20detected,\x20please\x20restart\x20the\x20application.'));
    }

    function setTrayIconAndConfigureTheActions(_0x10b85c) {
        (tray = new Tray(path['join'](__dirname, pathToTrayIcon)))[_0xaacb('0x80')](Menu['buildFromTemplate']([{
            'label': 'Open',
            'click': function () {
                appWindow['show']();
            }
        }, {
            'label': 'Quit', 'click': function () {
                executeActionsBeforeQuit(), app['quit']();
            }
        }])), tray['on'](_0xaacb('0x81'), () => {
            appWindow['show']();
        });
    }

    function notify(_0x50270c, _0x7bdf90, _0x465245) {
        switch (appLogger['info']('path icon ' + path['join'](__dirname, path_icon)), process['platform']) {
            case 'win32':
            case 'darwin':
                notifier[_0xaacb('0x84')]({
                    'title': _0x50270c,
                    'message': _0x7bdf90,
                    'icon': path['join'](__dirname, path_icon),
                    'sound': !_0x465245
                });
                break;
            case 'linux':
                const _0x2bc359 = {
                    'title': _0x50270c,
                    'body': _0x7bdf90,
                    'icon': path['join'](__dirname, path_icon),
                    'silent': _0x465245
                };
                new ElectronNotification(_0x2bc359)['show']();
        }
    }

    global['OPEN_APP_WINDOW_CHANNEL'] = 'open-app-window-channel', ipcMain['on'](global['OPEN_APP_WINDOW_CHANNEL'], () => {
        appLogger['info']('on OPEN_APP_WINDOW_CHANNEL'), appWindow && (appWindow['isMinimized']() && appWindow['restore'](), appWindow['show'](), 'win32' === process['platform'] && appWindow['minimize'](), appWindow[_0xaacb('0x29')]());
    }), global[_0xaacb('0x89')] = _0xaacb('0x8a'), ipcMain['on'](global[_0xaacb('0x89')], () => {
        appLogger['info'](_0xaacb('0x8b')), appWindow && appWindow[_0xaacb('0x44')]();
    }), global['OPEN_DEVELOPER_TOOL'] = 'open-dev-tool', ipcMain['on'](global['OPEN_DEVELOPER_TOOL'], _0x2e2ea8 => {
        isWebContentReady && appWindow['webContents'][_0xaacb('0x8d')]({'mode': _0xaacb('0x8e')});
    }), global['QUIT_APP_FROM_CLIENT_SIDE'] = 'quit-app-from-client-side', ipcMain['on'](global['QUIT_APP_FROM_CLIENT_SIDE'], () => {
        appLogger['info'](_0xaacb('0x91')), app['quit']();
    }), global['NOTIFY_CHANNEL'] = _0xaacb('0x84'), ipcMain['on'](global[_0xaacb('0x92')], (_0x4aea63, _0x37b96d, _0x7cb752, _0x529f95) => {
        appLogger['info']('Notify\x20on\x20screen\x20' + _0x37b96d + _0xaacb('0x93') + _0x529f95), notify(_0x37b96d, _0x7cb752, _0x529f95);
    }), e['on'](global['serviceChannelEvent'][_0xaacb('0x94')], (_0x1bddc6, _0x803923, _0x55806f) => {
        isWebContentReady && appWindow['webContents'][_0xaacb('0x63')](global[_0xaacb('0x95')][_0xaacb('0x94')], _0x1bddc6, _0x803923, _0x55806f);
    }), e['on'](global[_0xaacb('0x95')][_0xaacb('0x96')], () => {
        isWebContentReady && appWindow['webContents'][_0xaacb('0x63')](global[_0xaacb('0x95')]['servicePipeEnd']);
    }), e['on'](global[_0xaacb('0x95')][_0xaacb('0x97')], () => {
        actionCenterWindowModule && actionCenterWindowModule[_0xaacb('0x98')](!0x1), isWebContentReady && (inputAfterQButton['length'] > 0x0 || (actionCenterWindowModule && actionCenterWindowModule[_0xaacb('0x99')]() ? actionCenterWindowModule[_0xaacb('0x9a')]() : appWindow['webContents'][_0xaacb('0x63')](global[_0xaacb('0x95')][_0xaacb('0x9b')]))), registerKeyPressedWindow && registerKeyPressedWindow['close'](), clearQShortcutsRegistering();
    }), e['on'](global[_0xaacb('0x95')][_0xaacb('0x9c')], () => {
        actionCenterWindowModule && actionCenterWindowModule[_0xaacb('0x98')](!0x0), openRegisterKeyPressedWindow();
    }), e['on'](global[_0xaacb('0x95')][_0xaacb('0x9d')], (_0x9af919, _0x52aa50) => {
        isWebContentReady && appWindow['webContents']['send'](global[_0xaacb('0x95')][_0xaacb('0x9d')], _0x9af919, _0x52aa50);
    }), e['on'](global[_0xaacb('0x95')][_0xaacb('0x9e')], (_0x689284, _0x5c71bf) => {
        isWebContentReady && appWindow['webContents'][_0xaacb('0x63')](global[_0xaacb('0x95')]['devicePluggedOut'], _0x689284, _0x5c71bf);
    }), n['on'](global['windowNameChange'], _0x3afb16 => {
        appLogger['info'](_0xaacb('0x9f') + _0x3afb16), isWebContentReady && appWindow['webContents'][_0xaacb('0x63')](global[_0xaacb('0xa0')], _0x3afb16);
    }), ipcMain['on'](global['serviceChannelEvent']['stackOfCommands'], (_0x2a5be0, _0xe58ab) => {
        _0xe58ab['forEach'](_0x53ed85 => {
            e['putFullCommandOnStackOfCommands'](_0x53ed85);
        });
    }), ipcMain['on'](global[_0xaacb('0x95')]['getDevicePluggedDevices'], _0x183772 => {
        _0x183772['returnValue'] = e['getPluggedDevices']();
    }), require(_0xaacb('0xa1'))['on'](global[_0xaacb('0xa2')], (_0x226a60, _0x4011c9) => {
        isWebContentReady && appWindow['webContents'][_0xaacb('0x63')](global['FLASH_NOTICE_CHANNEL'], _0x226a60, _0x4011c9);
    }), global[_0xaacb('0xa3')] = {'openAuthLoginPage': _0xaacb('0xa4')};
    const i = _0xaacb('0xa5'), r = 'https://' + cloudServerUrl + _0xaacb('0xa6'),
        a = _0xaacb('0xa7') + cloudServerUrl + _0xaacb('0xa8'), s = 'https://' + cloudServerUrl + _0xaacb('0xa9');

    function startExtensionHost() {
        const _0x193e9f = path['resolve'](__dirname, _0xaacb('0xaa'));
        appLogger['info'](_0xaacb('0xab') + _0x193e9f);
        const _0x1a294f = {'oAuth2ProxyBaseUrlDefault': a, 'oAuth2ProxyUri': s};
        Object[_0xaacb('0xac')](_0x1a294f, process['env']), fork(_0x193e9f, [], {
            'cwd': path['resolve'](pathToquioV2Folder),
            'env': _0x1a294f
        }), ipcMain['on'](global[_0xaacb('0xa3')]['openAuthLoginPage'], (_0x219cde, _0x319cab) => {
            openOauthLoginPage(_0x319cab, _0x219cde);
        });
    }

    function openOauthLoginPage(_0x3c9ea0, _0x46f8f8) {
        appLogger['info'](_0xaacb('0xad'));
        const _0x2b244c = session[_0xaacb('0xae')](_0xaacb('0xaf'));
        oauthWindow = new BrowserWindow({
            'width': 0x320,
            'height': 0x258,
            'show': !0x1,
            'webPreferences': {'nodeIntegration': !0x1, 'webSecurity': !0x1, 'session': _0x2b244c}
        }), _0x2b244c[_0xaacb('0xb0')]();
        const _0x8238f4 = _0xaacb('0xa7') + cloudServerUrl + _0xaacb('0xb1') + _0x3c9ea0 + (_0xaacb('0xb2') + i),
            _0xb0aa35 = {'urls': [i + '*']};
        _0x2b244c[_0xaacb('0xb3')][_0xaacb('0xb4')](_0xb0aa35, function (_0x5629f1, _0x6343ee) {
            const _0x5f1381 = _0x5629f1[_0xaacb('0xb5')];
            appLogger['info'](_0xaacb('0xb6'));
            const _0x524446 = getParameterByName('code', _0x5f1381),
                _0x1f3b33 = getParameterByName(_0xaacb('0xb7'), _0x5f1381);
            appLogger['info'](_0xaacb('0xb8') + _0x524446), appLogger['info']('got\x20state\x20' + _0x1f3b33), request[_0xaacb('0xb9')]({
                'url': r + (_0xaacb('0xba') + _0x524446 + _0xaacb('0xbb') + _0x1f3b33),
                'json': !0x0
            })['then'](_0x3dc68f => {
                appLogger['info'](_0xaacb('0xbc'));
                const _0x6343ee = _0x3dc68f['apiKey'];
                appLogger['info'](_0xaacb('0xbd') + _0x6343ee), _0x46f8f8[_0xaacb('0xbe')] = _0x6343ee, oauthWindow[_0xaacb('0x44')]();
            })[_0xaacb('0x79')](_0x44ac43 => {
                appLogger['error'](_0xaacb('0xbf') + _0x44ac43), _0x46f8f8['returnValue'] = null, oauthWindow[_0xaacb('0x44')]();
            }), _0x6343ee({'cancel': !0x1});
        }), oauthWindow['on'](_0xaacb('0x48'), () => {
            appLogger['info']('Auth\x20window\x20closed'), oauthWindow = null, _0x46f8f8[_0xaacb('0xbe')] = null, delete _0x2b244c;
        }), appLogger['info'](_0xaacb('0xc0') + _0x8238f4), oauthWindow['loadURL'](_0x8238f4), oauthWindow['show']();
    }

    function getParameterByName(_0x384bc6, _0x14e1bb) {
        _0x14e1bb || (_0x14e1bb = window[_0xaacb('0xc1')]['href']), _0x384bc6 = _0x384bc6[_0xaacb('0xc2')](/[\[\]]/g, _0xaacb('0xc3'));
        const _0x326ed1 = new RegExp(_0xaacb('0xc4') + _0x384bc6 + _0xaacb('0xc5'))['exec'](_0x14e1bb);
        return _0x326ed1 ? _0x326ed1[0x2] ? decodeURIComponent(_0x326ed1[0x2][_0xaacb('0xc2')](/\+/g, '\x20')) : '' : null;
    }

    const p = {'keyPressedAfterQButton': 'keyPressedAfterQButton'};

    function openRegisterKeyPressedWindow() {
        appLogger['info'](_0xaacb('0xc6')), (registerKeyPressedWindow = new BrowserWindow({
            'icon': path['join'](__dirname, pathToApplicationIcon),
            'width': 0x12c,
            'height': 0x12c,
            'center': !0x0,
            'resizable': !0x1,
            'alwaysOnTop': !0x0,
            'fullscreenable': !0x1,
            'frame': !0x1,
            'transparent': !0x0,
            'titleBarStyle': _0xaacb('0xc7')
        }))['on'](_0xaacb('0x48'), () => {
            appLogger['info'](_0xaacb('0xc8')), registerKeyPressedWindow = null;
        }), registerKeyPressedWindow['on'](_0xaacb('0xc9'), () => {
            appLogger['info'](_0xaacb('0xca'));
        }), registerKeyPressedWindow['webContents']['on']('before-input-event', (_0x3b2138, _0x38d054) => {
            if (_0x3b2138[_0xaacb('0x46')](), _0xaacb('0xcb') !== _0x38d054['code']) switch (_0x38d054['type']) {
                case 'keyDown':
                    (inputAfterQButton = inputAfterQButton[_0xaacb('0xcc')](_0x206552 => _0x206552['code'] !== _0x38d054[_0xaacb('0xcd')]))[_0xaacb('0xce')](_0x38d054), onShortcutWithQButton();
            }
        }), 'darwin' === process['platform'] ? registerKeyPressedWindow[_0xaacb('0xcf')]('./q-shortcut-mac.html') : registerKeyPressedWindow[_0xaacb('0xcf')](_0xaacb('0xd0')), registerKeyPressedWindow['show'](), 'win32' === process['platform'] && registerKeyPressedWindow['minimize'](), registerKeyPressedWindow[_0xaacb('0x29')]();
    }

    function onShortcutWithQButton() {
        isWebContentReady && appWindow['webContents'][_0xaacb('0x63')](global[_0xaacb('0xd1')][_0xaacb('0xd2')], inputAfterQButton), registerKeyPressedWindow && registerKeyPressedWindow[_0xaacb('0x44')]();
    }

    function clearQShortcutsRegistering() {
        inputAfterQButton = [];
    }

    global['QShortcutEvents'] = p, actionCenterWindowModule['on'](global[_0xaacb('0xd3')][_0xaacb('0xd4')], () => {
        isWebContentReady && appWindow['webContents'][_0xaacb('0x63')](global[_0xaacb('0xd3')][_0xaacb('0xd4')]);
    }), actionCenterWindowModule['on'](global[_0xaacb('0xd3')]['openExternal'], _0x49bb06 => {
        shell[_0xaacb('0xd5')](_0x49bb06);
    }), actionCenterWindowModule['on'](global[_0xaacb('0xd3')]['openMarketplace'], () => {
        isWebContentReady && appWindow['webContents'][_0xaacb('0x63')](global['actionCenterUtilitiesEvents']['openMarketplace']);
    }), ipcMain['on'](global[_0xaacb('0xd3')][_0xaacb('0xd6')], _0x4e7352 => {
        appLogger['info'](_0xaacb('0xd7') + _0x4e7352), isWebContentReady && appWindow['webContents'][_0xaacb('0x63')](global[_0xaacb('0xd3')]['openAppAtUrl'], _0x4e7352);
    });
    const l = {
        'joinPaths': 'joinPaths',
        'resolvePath': _0xaacb('0xd8'),
        'downloadFinished': _0xaacb('0x65'),
        'changeAdvancedServiceLogState': _0xaacb('0xd9'),
        'grantWin32ServicePermissions': _0xaacb('0xda'),
        'openFileSystemExplorer': _0xaacb('0xdb')
    };

    function grantWin32ServicePermissionToFile(_0x4d53e4) {
        return new Promise((_0x4c5cc4, _0x5343e1) => {
            if (setTimeout(() => {
                _0x5343e1(!0x1);
            }, 0x1388), 'win32' !== process['platform']) throw new Error(_0xaacb('0xdc'));
            exec(_0xaacb('0xdd') + _0x4d53e4 + _0xaacb('0xde'), (_0x2dc0d8, _0xd54b01, _0x410ae8) => {
                _0x2dc0d8 && (appLogger['info']('Error\x20while\x20granting\x20LOCAL\x20SERVICE\x20access\x20to\x20' + _0x4d53e4 + '\x20' + _0x2dc0d8), _0x5343e1(!0x1)), _0x4c5cc4(!0x0), appLogger['info']('grantWin32ServicePermissionToFile\x20' + _0x4d53e4 + '\x20success');
            });
        });
    }

    global[_0xaacb('0x64')] = l, ipcMain['on'](l[_0xaacb('0xd8')], (_0x53234c, _0x4112dd) => {
        _0x53234c['returnValue'] = path['resolve'](_0x4112dd);
    }), ipcMain['on'](l[_0xaacb('0xdf')], (_0x476a26, _0x5a07fe, _0x2c8320) => {
        _0x476a26[_0xaacb('0xbe')] = path['join'](_0x5a07fe, _0x2c8320);
    }), ipcMain['on'](l['changeAdvancedServiceLogState'], (_0x13680c, _0x5069dd) => {
        e[_0xaacb('0xd9')](_0x5069dd);
    }), ipcMain['on'](l[_0xaacb('0xe0')], (_0x15eea9, _0x18bc03) => {
        try {
            grantWin32ServicePermissionToFile(_0x18bc03)['then'](_0x4c1e52 => {
                _0x15eea9['returnValue'] = _0x4c1e52;
            })[_0xaacb('0x79')](() => {
                _0x15eea9[_0xaacb('0xbe')] = !0x1;
            });
        } catch (_0x362a50) {
            appLogger['error'](_0xaacb('0xe1') + _0x18bc03), appLogger['error'](_0xaacb('0xe2') + _0x362a50);
        }
    }), ipcMain['on'](l[_0xaacb('0xe3')], _0x408830 => {
        appLogger['info'](_0xaacb('0xe4'));
        const _0xf2f139 = dialog[_0xaacb('0xe5')](appWindow, {'properties': ['openFile']});
        appLogger['info'](_0xaacb('0xe6')), _0x408830['returnValue'] = _0xf2f139 || [];
    });
}